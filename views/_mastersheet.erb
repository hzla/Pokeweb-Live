
<% @master_data.each do |element| %>
	<% if element[:content] %>
		<%= Mastersheet.handle(element) %>
	<% elsif element[:tag] == "trainer"  %>
		<% i = element[:id] %>

		<% trainer = @trainers[i] %>
		<div class="expanded-field filterable ms-trainer <%= element[:class] %> <%= 'doubles' if element[:notes] && element[:notes].join("").downcase.include?("multi") %>" data-index="<%= i %>">
			<div class="expanded-field-main">
				<div class="trainer-name"><%= img Trdata.sprite(trainer["name"],trainer['class'],trainer['class_id'], @gender_table) %> <%= "#{trainer['class']}" %> <%= trainer["name"] %> <%= trainer["location"] ? "(#{trainer["location"][0]})" : ""  %>
					

					<% if trainer["battle_type_1"] != "Singles" && trainer["battle_type"] != "Singles" %>
						
						(<%= trainer["battle_type_1"] || trainer["battle_type"] %>)	
					<% end %>
					<div class="tr-notes"><%= element[:notes].join(" ") if element[:notes] %></div>
				</div>
			</div>				
			<div class="expanded-card-content expanded-docs">
				<% (0.. @trainer_poks[i]["count"] - 1).each do |pok_index| %>					
				<%= erb :_trpok, :layout => false, :locals => { :personals => @poke_data, :trdata => trainer, :trpok => @trainer_poks[i], :trpok_index => pok_index, :show => "", :trdata_index => i, :doc_view => true, :sprite => Trpok.get_poks_for(@trainer_poks[i]["count"] , @trainer_poks[i]), :has_moves => Trdata.has_moves?(trainer), :abilities => Trpok.get_abilities_for(i, @poke_data)} %>

				<% end %>	
				
			</div>
		</div>
	<% elsif element[:tag] == "encounter" %>
		<% if $gen == 5 %>
				<%= erb :"mastersheet/_encounter", :layout => false, :locals => { :i => element[:id], :enc=> @encounters[element[:id]], :season => "spring"} %>
			<% else %>
				<%= erb :"mastersheet/_hgss_encounter", :layout => false, :locals => { :i => element[:id], :enc=> @encounters[element[:id]], :season => "spring"} %>
			<% end %>
	<% else %>
	<br>
	<% end %>
<% end %>




